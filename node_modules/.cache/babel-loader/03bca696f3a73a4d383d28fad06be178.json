{"ast":null,"code":"var _jsxFileName = \"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\src\\\\containers\\\\appointments\\\\views\\\\newAppointment\\\\infoSection.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { DateInput } from '../../../../components/dates';\nimport { FormGroup, FormLabel, FormRow, FormSubmit } from '../../../../components/form';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function InfoSection(props) {\n  _s();\n  const [slots, setSlots] = useState([]);\n  const generateTimeSlots = useCallback(() => {\n    const times = [];\n    for (let hour = 9; hour < 18; hour++) {\n      for (let min of [\"00\", \"30\"]) {\n        if (hour === 12 && min === \"30\") continue; // Break\n        let period = hour >= 12 ? \"PM\" : \"AM\";\n        let displayHour = hour > 12 ? hour - 12 : hour;\n        if (displayHour === 0) displayHour = 12;\n        times.push(`${displayHour}:${min} ${period}`);\n      }\n    }\n    return times;\n  }, []);\n  useEffect(() => {\n    const fetchBookedSlots = async () => {\n      // Only fetch if we have a doctor and a date selected\n      if (!props.startDate || !props.physician) return;\n      try {\n        // Fetching actual booked slots from your new backend route\n        const response = await fetch(`/api/appointments/booked?physician=${props.physician}&date=${props.startDate}`);\n        const bookedTimes = await response.json();\n        const allPossibleSlots = generateTimeSlots();\n        const statusSlots = allPossibleSlots.map(time => ({\n          time,\n          status: bookedTimes.includes(time) ? \"booked\" : \"available\"\n        }));\n        setSlots(statusSlots);\n      } catch (err) {\n        console.error(\"Error fetching availability:\", err);\n      }\n    };\n    fetchBookedSlots();\n  }, [props.startDate, props.physician, generateTimeSlots]);\n  if (props.currentStep !== 2) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [props.errorMessage && /*#__PURE__*/_jsxDEV(FormRow, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger w-100\",\n        role: \"alert\",\n        children: props.errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        className: \"text-muted\",\n        children: \"Appointment Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        className: \"form-control\",\n        placeholder: \"e.g. Consultation\",\n        value: props.title,\n        onChange: props.handleChange,\n        maxLength: \"75\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormRow, {\n      children: /*#__PURE__*/_jsxDEV(FormGroup, {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(DateInput, {\n          name: \"startDate\",\n          label: \"Select Date\",\n          value: props.startDate,\n          handleChange: props.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        className: \"text-muted\",\n        children: \"Available Slots\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row no-gutters\",\n        children: slots.map((slot, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4 col-md-3 p-1\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `btn btn-block btn-sm py-2 ${slot.status === \"booked\" ? \"btn-danger disabled\" : props.startTime === slot.time ? \"btn-success shadow border-dark\" : \"btn-outline-success\"}`,\n            onClick: () => {\n              if (slot.status !== \"booked\") {\n                props.handleChange({\n                  target: {\n                    name: 'startTime',\n                    value: slot.time\n                  }\n                });\n              }\n            },\n            style: {\n              cursor: slot.status === \"booked\" ? \"not-allowed\" : \"pointer\"\n            },\n            children: slot.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        className: \"text-muted\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        className: \"form-control\",\n        value: props.description,\n        onChange: props.handleChange,\n        rows: \"3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormRow, {\n      className: \"d-flex justify-content-center m-2\",\n      children: /*#__PURE__*/_jsxDEV(FormSubmit, {\n        disabled: !props.startTime || !props.title || !props.startDate,\n        children: \"Request Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(InfoSection, \"n/W6r81h4KXSrXlie/fmeyJVTFo=\");\n_c = InfoSection;\nvar _c;\n$RefreshReg$(_c, \"InfoSection\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","DateInput","FormGroup","FormLabel","FormRow","FormSubmit","jsxDEV","_jsxDEV","Fragment","_Fragment","InfoSection","props","_s","slots","setSlots","generateTimeSlots","times","hour","min","period","displayHour","push","fetchBookedSlots","startDate","physician","response","fetch","bookedTimes","json","allPossibleSlots","statusSlots","map","time","status","includes","err","console","error","currentStep","children","errorMessage","className","role","fileName","_jsxFileName","lineNumber","columnNumber","type","name","placeholder","value","title","onChange","handleChange","maxLength","label","slot","index","startTime","onClick","target","style","cursor","description","rows","disabled","_c","$RefreshReg$"],"sources":["D:/Niharika/WT Project/Medicus/src/containers/appointments/views/newAppointment/infoSection.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { DateInput } from '../../../../components/dates';\r\nimport { FormGroup, FormLabel, FormRow, FormSubmit } from '../../../../components/form';\r\n\r\nexport default function InfoSection(props) {\r\n    const [slots, setSlots] = useState([]);\r\n\r\n    const generateTimeSlots = useCallback(() => {\r\n        const times = [];\r\n        for (let hour = 9; hour < 18; hour++) {\r\n            for (let min of [\"00\", \"30\"]) {\r\n                if (hour === 12 && min === \"30\") continue; // Break\r\n                let period = hour >= 12 ? \"PM\" : \"AM\";\r\n                let displayHour = hour > 12 ? hour - 12 : hour;\r\n                if (displayHour === 0) displayHour = 12;\r\n                times.push(`${displayHour}:${min} ${period}`);\r\n            }\r\n        }\r\n        return times;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchBookedSlots = async () => {\r\n            // Only fetch if we have a doctor and a date selected\r\n            if (!props.startDate || !props.physician) return;\r\n\r\n            try {\r\n                // Fetching actual booked slots from your new backend route\r\n                const response = await fetch(`/api/appointments/booked?physician=${props.physician}&date=${props.startDate}`);\r\n                const bookedTimes = await response.json(); \r\n\r\n                const allPossibleSlots = generateTimeSlots();\r\n                const statusSlots = allPossibleSlots.map(time => ({\r\n                    time,\r\n                    status: bookedTimes.includes(time) ? \"booked\" : \"available\"\r\n                }));\r\n\r\n                setSlots(statusSlots);\r\n            } catch (err) {\r\n                console.error(\"Error fetching availability:\", err);\r\n            }\r\n        };\r\n\r\n        fetchBookedSlots();\r\n    }, [props.startDate, props.physician, generateTimeSlots]);\r\n\r\n    if (props.currentStep !== 2) return null;\r\n\r\n    return (\r\n        <>\r\n            {props.errorMessage && (\r\n                <FormRow className=\"justify-content-center\">\r\n                    <div className=\"alert alert-danger w-100\" role=\"alert\">{props.errorMessage}</div>\r\n                </FormRow>\r\n            )}\r\n\r\n            <FormGroup>\r\n                <FormLabel className=\"text-muted\">Appointment Title</FormLabel>\r\n                <input type=\"text\" name=\"title\" className=\"form-control\"\r\n                    placeholder=\"e.g. Consultation\" value={props.title} \r\n                    onChange={props.handleChange} maxLength=\"75\" />\r\n            </FormGroup>\r\n\r\n            <FormRow>\r\n                <FormGroup className=\"col-12\">\r\n                    <DateInput name=\"startDate\" label=\"Select Date\"\r\n                        value={props.startDate} handleChange={props.handleChange} />\r\n                </FormGroup>\r\n            </FormRow>\r\n\r\n            <FormGroup>\r\n                <FormLabel className=\"text-muted\">Available Slots</FormLabel>\r\n                <div className=\"row no-gutters\">\r\n                    {slots.map((slot, index) => (\r\n                        <div key={index} className=\"col-4 col-md-3 p-1\">\r\n                            <button\r\n                                type=\"button\"\r\n                                className={`btn btn-block btn-sm py-2 ${\r\n                                    slot.status === \"booked\" \r\n                                    ? \"btn-danger disabled\" \r\n                                    : props.startTime === slot.time \r\n                                        ? \"btn-success shadow border-dark\" \r\n                                        : \"btn-outline-success\"\r\n                                }`}\r\n                                onClick={() => {\r\n                                    if (slot.status !== \"booked\") {\r\n                                        props.handleChange({ target: { name: 'startTime', value: slot.time }});\r\n                                    }\r\n                                }}\r\n                                style={{ cursor: slot.status === \"booked\" ? \"not-allowed\" : \"pointer\" }}\r\n                            >\r\n                                {slot.time}\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </FormGroup>\r\n\r\n            <FormGroup>\r\n                <FormLabel className=\"text-muted\">Description</FormLabel>\r\n                <textarea name=\"description\" className=\"form-control\"\r\n                    value={props.description} onChange={props.handleChange} rows=\"3\">\r\n                </textarea>\r\n            </FormGroup>\r\n\r\n            <FormRow className=\"d-flex justify-content-center m-2\">\r\n                <FormSubmit disabled={!props.startTime || !props.title || !props.startDate}>\r\n                    Request Appointment\r\n                </FormSubmit>\r\n            </FormRow>\r\n        </>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,SAAS,QAAQ,8BAA8B;AACxD,SAASC,SAAS,EAAEC,SAAS,EAAEC,OAAO,EAAEC,UAAU,QAAQ,6BAA6B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAExF,eAAe,SAASC,WAAWA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMiB,iBAAiB,GAAGf,WAAW,CAAC,MAAM;IACxC,MAAMgB,KAAK,GAAG,EAAE;IAChB,KAAK,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAG,EAAE,EAAEA,IAAI,EAAE,EAAE;MAClC,KAAK,IAAIC,GAAG,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE;QAC1B,IAAID,IAAI,KAAK,EAAE,IAAIC,GAAG,KAAK,IAAI,EAAE,SAAS,CAAC;QAC3C,IAAIC,MAAM,GAAGF,IAAI,IAAI,EAAE,GAAG,IAAI,GAAG,IAAI;QACrC,IAAIG,WAAW,GAAGH,IAAI,GAAG,EAAE,GAAGA,IAAI,GAAG,EAAE,GAAGA,IAAI;QAC9C,IAAIG,WAAW,KAAK,CAAC,EAAEA,WAAW,GAAG,EAAE;QACvCJ,KAAK,CAACK,IAAI,CAAC,GAAGD,WAAW,IAAIF,GAAG,IAAIC,MAAM,EAAE,CAAC;MACjD;IACJ;IACA,OAAOH,KAAK;EAChB,CAAC,EAAE,EAAE,CAAC;EAENjB,SAAS,CAAC,MAAM;IACZ,MAAMuB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACjC;MACA,IAAI,CAACX,KAAK,CAACY,SAAS,IAAI,CAACZ,KAAK,CAACa,SAAS,EAAE;MAE1C,IAAI;QACA;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsCf,KAAK,CAACa,SAAS,SAASb,KAAK,CAACY,SAAS,EAAE,CAAC;QAC7G,MAAMI,WAAW,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAEzC,MAAMC,gBAAgB,GAAGd,iBAAiB,CAAC,CAAC;QAC5C,MAAMe,WAAW,GAAGD,gBAAgB,CAACE,GAAG,CAACC,IAAI,KAAK;UAC9CA,IAAI;UACJC,MAAM,EAAEN,WAAW,CAACO,QAAQ,CAACF,IAAI,CAAC,GAAG,QAAQ,GAAG;QACpD,CAAC,CAAC,CAAC;QAEHlB,QAAQ,CAACgB,WAAW,CAAC;MACzB,CAAC,CAAC,OAAOK,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAAC;MACtD;IACJ,CAAC;IAEDb,gBAAgB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACX,KAAK,CAACY,SAAS,EAAEZ,KAAK,CAACa,SAAS,EAAET,iBAAiB,CAAC,CAAC;EAEzD,IAAIJ,KAAK,CAAC2B,WAAW,KAAK,CAAC,EAAE,OAAO,IAAI;EAExC,oBACI/B,OAAA,CAAAE,SAAA;IAAA8B,QAAA,GACK5B,KAAK,CAAC6B,YAAY,iBACfjC,OAAA,CAACH,OAAO;MAACqC,SAAS,EAAC,wBAAwB;MAAAF,QAAA,eACvChC,OAAA;QAAKkC,SAAS,EAAC,0BAA0B;QAACC,IAAI,EAAC,OAAO;QAAAH,QAAA,EAAE5B,KAAK,CAAC6B;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5E,CACZ,eAEDvC,OAAA,CAACL,SAAS;MAAAqC,QAAA,gBACNhC,OAAA,CAACJ,SAAS;QAACsC,SAAS,EAAC,YAAY;QAAAF,QAAA,EAAC;MAAiB;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CAAC,eAC/DvC,OAAA;QAAOwC,IAAI,EAAC,MAAM;QAACC,IAAI,EAAC,OAAO;QAACP,SAAS,EAAC,cAAc;QACpDQ,WAAW,EAAC,mBAAmB;QAACC,KAAK,EAAEvC,KAAK,CAACwC,KAAM;QACnDC,QAAQ,EAAEzC,KAAK,CAAC0C,YAAa;QAACC,SAAS,EAAC;MAAI;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CAAC,eAEZvC,OAAA,CAACH,OAAO;MAAAmC,QAAA,eACJhC,OAAA,CAACL,SAAS;QAACuC,SAAS,EAAC,QAAQ;QAAAF,QAAA,eACzBhC,OAAA,CAACN,SAAS;UAAC+C,IAAI,EAAC,WAAW;UAACO,KAAK,EAAC,aAAa;UAC3CL,KAAK,EAAEvC,KAAK,CAACY,SAAU;UAAC8B,YAAY,EAAE1C,KAAK,CAAC0C;QAAa;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAEVvC,OAAA,CAACL,SAAS;MAAAqC,QAAA,gBACNhC,OAAA,CAACJ,SAAS;QAACsC,SAAS,EAAC,YAAY;QAAAF,QAAA,EAAC;MAAe;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CAAC,eAC7DvC,OAAA;QAAKkC,SAAS,EAAC,gBAAgB;QAAAF,QAAA,EAC1B1B,KAAK,CAACkB,GAAG,CAAC,CAACyB,IAAI,EAAEC,KAAK,kBACnBlD,OAAA;UAAiBkC,SAAS,EAAC,oBAAoB;UAAAF,QAAA,eAC3ChC,OAAA;YACIwC,IAAI,EAAC,QAAQ;YACbN,SAAS,EAAE,6BACPe,IAAI,CAACvB,MAAM,KAAK,QAAQ,GACtB,qBAAqB,GACrBtB,KAAK,CAAC+C,SAAS,KAAKF,IAAI,CAACxB,IAAI,GACzB,gCAAgC,GAChC,qBAAqB,EAC5B;YACH2B,OAAO,EAAEA,CAAA,KAAM;cACX,IAAIH,IAAI,CAACvB,MAAM,KAAK,QAAQ,EAAE;gBAC1BtB,KAAK,CAAC0C,YAAY,CAAC;kBAAEO,MAAM,EAAE;oBAAEZ,IAAI,EAAE,WAAW;oBAAEE,KAAK,EAAEM,IAAI,CAACxB;kBAAK;gBAAC,CAAC,CAAC;cAC1E;YACJ,CAAE;YACF6B,KAAK,EAAE;cAAEC,MAAM,EAAEN,IAAI,CAACvB,MAAM,KAAK,QAAQ,GAAG,aAAa,GAAG;YAAU,CAAE;YAAAM,QAAA,EAEvEiB,IAAI,CAACxB;UAAI;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN;QAAC,GAlBHW,KAAK;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAmBV,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAEZvC,OAAA,CAACL,SAAS;MAAAqC,QAAA,gBACNhC,OAAA,CAACJ,SAAS;QAACsC,SAAS,EAAC,YAAY;QAAAF,QAAA,EAAC;MAAW;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAW,CAAC,eACzDvC,OAAA;QAAUyC,IAAI,EAAC,aAAa;QAACP,SAAS,EAAC,cAAc;QACjDS,KAAK,EAAEvC,KAAK,CAACoD,WAAY;QAACX,QAAQ,EAAEzC,KAAK,CAAC0C,YAAa;QAACW,IAAI,EAAC;MAAG;QAAArB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1D,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAEZvC,OAAA,CAACH,OAAO;MAACqC,SAAS,EAAC,mCAAmC;MAAAF,QAAA,eAClDhC,OAAA,CAACF,UAAU;QAAC4D,QAAQ,EAAE,CAACtD,KAAK,CAAC+C,SAAS,IAAI,CAAC/C,KAAK,CAACwC,KAAK,IAAI,CAACxC,KAAK,CAACY,SAAU;QAAAgB,QAAA,EAAC;MAE5E;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA,eACZ,CAAC;AAEX;AAAClC,EAAA,CA5GuBF,WAAW;AAAAwD,EAAA,GAAXxD,WAAW;AAAA,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}