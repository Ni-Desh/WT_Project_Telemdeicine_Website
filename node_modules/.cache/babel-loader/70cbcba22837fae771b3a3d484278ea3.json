{"ast":null,"code":"import * as api from '../api';\nimport { setDoctors, setLocker } from '../store/index';\n\n// HELPER: Grabs the \"Key\" (token) so the backend allows the search\nconst getAuthToken = state => {\n  var _state$session;\n  const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\n  return ((_state$session = state.session) === null || _state$session === void 0 ? void 0 : _state$session.token) || user.token || localStorage.getItem('token');\n};\n\n// FEATURE: Search Physician & Shared Time Slots\nexport const getDoctors = name => async (dispatch, getState) => {\n  try {\n    const token = getAuthToken(getState());\n\n    // This call fetches the doctor list AND the red/green status for slots\n    const {\n      data\n    } = await api.searchDoctors(name, token);\n    dispatch(setDoctors(data));\n    console.log(\"✅ Physician list and shared time slots loaded successfully.\");\n  } catch (error) {\n    var _error$response;\n    console.error(\"Authorization Error - Search blocked:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n  }\n};\n\n// FEATURE: Profile Photo & Medical Records\nexport const getLocker = username => async (dispatch, getState) => {\n  try {\n    const token = getAuthToken(getState());\n    const {\n      data\n    } = await api.fetchLocker(username, token);\n    dispatch(setLocker(data));\n  } catch (error) {\n    console.error(\"Locker/Profile Error:\", error.message);\n  }\n};","map":{"version":3,"names":["api","setDoctors","setLocker","getAuthToken","state","_state$session","user","JSON","parse","localStorage","getItem","session","token","getDoctors","name","dispatch","getState","data","searchDoctors","console","log","error","_error$response","response","message","getLocker","username","fetchLocker"],"sources":["D:/Niharika/WT Project/Medicus/src/Actions/patient.js"],"sourcesContent":["import * as api from '../api';\r\nimport { setDoctors, setLocker } from '../store/index'; \r\n\r\n// HELPER: Grabs the \"Key\" (token) so the backend allows the search\r\nconst getAuthToken = (state) => {\r\n    const user = JSON.parse(localStorage.getItem('loggedInUser') || '{}');\r\n    return state.session?.token || user.token || localStorage.getItem('token');\r\n};\r\n\r\n// FEATURE: Search Physician & Shared Time Slots\r\nexport const getDoctors = (name) => async (dispatch, getState) => {\r\n    try {\r\n        const token = getAuthToken(getState());\r\n        \r\n        // This call fetches the doctor list AND the red/green status for slots\r\n        const { data } = await api.searchDoctors(name, token); \r\n        \r\n        dispatch(setDoctors(data)); \r\n        console.log(\"✅ Physician list and shared time slots loaded successfully.\");\r\n    } catch (error) {\r\n        console.error(\"Authorization Error - Search blocked:\", error.response?.data || error.message);\r\n    }\r\n};\r\n\r\n// FEATURE: Profile Photo & Medical Records\r\nexport const getLocker = (username) => async (dispatch, getState) => {\r\n    try {\r\n        const token = getAuthToken(getState());\r\n        const { data } = await api.fetchLocker(username, token);\r\n        dispatch(setLocker(data)); \r\n    } catch (error) {\r\n        console.error(\"Locker/Profile Error:\", error.message);\r\n    }\r\n};"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,QAAQ;AAC7B,SAASC,UAAU,EAAEC,SAAS,QAAQ,gBAAgB;;AAEtD;AACA,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAAA,IAAAC,cAAA;EAC5B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC;EACrE,OAAO,EAAAL,cAAA,GAAAD,KAAK,CAACO,OAAO,cAAAN,cAAA,uBAAbA,cAAA,CAAeO,KAAK,KAAIN,IAAI,CAACM,KAAK,IAAIH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AAC9E,CAAC;;AAED;AACA,OAAO,MAAMG,UAAU,GAAIC,IAAI,IAAK,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EAC9D,IAAI;IACA,MAAMJ,KAAK,GAAGT,YAAY,CAACa,QAAQ,CAAC,CAAC,CAAC;;IAEtC;IACA,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMjB,GAAG,CAACkB,aAAa,CAACJ,IAAI,EAAEF,KAAK,CAAC;IAErDG,QAAQ,CAACd,UAAU,CAACgB,IAAI,CAAC,CAAC;IAC1BE,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;EAC9E,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA;IACZH,OAAO,CAACE,KAAK,CAAC,uCAAuC,EAAE,EAAAC,eAAA,GAAAD,KAAK,CAACE,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBL,IAAI,KAAII,KAAK,CAACG,OAAO,CAAC;EACjG;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,SAAS,GAAIC,QAAQ,IAAK,OAAOX,QAAQ,EAAEC,QAAQ,KAAK;EACjE,IAAI;IACA,MAAMJ,KAAK,GAAGT,YAAY,CAACa,QAAQ,CAAC,CAAC,CAAC;IACtC,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMjB,GAAG,CAAC2B,WAAW,CAACD,QAAQ,EAAEd,KAAK,CAAC;IACvDG,QAAQ,CAACb,SAAS,CAACe,IAAI,CAAC,CAAC;EAC7B,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACG,OAAO,CAAC;EACzD;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}