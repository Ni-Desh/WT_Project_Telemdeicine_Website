{"ast":null,"code":"var _jsxFileName = \"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\src\\\\containers\\\\settings\\\\widgets\\\\deleteUser.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavItem } from '../../../components/navs';\nimport { TitleBar, TitleButton, TitleButtons, Widget, WidgetBody } from '../../../components/widgets';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DeleteUserWidget(props) {\n  _s();\n  const session = useSelector(s => s.session);\n  const dispatch = useDispatch();\n  const [validateMode, setValidateMode] = useState(false);\n  async function toggleValidateMode(e) {\n    e.preventDefault();\n    setValidateMode(!validateMode);\n  }\n  async function clickedAccept(e) {\n    e.preventDefault();\n    try {\n      const deleteResponse = await fetch(`/api/users/${session.username}`, {\n        method: 'DELETE',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.authToken}`\n        }\n      });\n      let data = await deleteResponse.json();\n      if (!deleteResponse.ok) {\n        throw new Error(data.message);\n      }\n      const signOutResponse = await fetch(`/api/auth/signout`, {\n        method: 'GET',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.authToken}`\n        }\n      });\n      data = await signOutResponse.json();\n      if (!signOutResponse.ok) {\n        throw new Error(data.message);\n      }\n      dispatch({\n        type: \"session/reset\"\n      });\n    } catch (err) {\n      console.error(`Failed to delete user. ${err}`);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Widget, {\n    children: [/*#__PURE__*/_jsxDEV(TitleBar, {\n      title: \"Delete Account\",\n      children: validateMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(TitleButtons, {\n          children: [/*#__PURE__*/_jsxDEV(NavItem, {\n            children: /*#__PURE__*/_jsxDEV(TitleButton, {\n              name: \"Accept\",\n              icon: \"check\",\n              handleClick: clickedAccept\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n            children: /*#__PURE__*/_jsxDEV(TitleButton, {\n              name: \"Cancel\",\n              icon: \"clear\",\n              handleClick: toggleValidateMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(TitleButton, {\n          name: \"Delete\",\n          icon: \"delete\",\n          handleClick: toggleValidateMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), validateMode && /*#__PURE__*/_jsxDEV(WidgetBody, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        children: \"Once your account is deleted, all your information is removed from our website and it cannot be retrieved back. Please reconsider once before proceeding. We're sad to see you leave.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n_s(DeleteUserWidget, \"fdRMRYJFSpchMyJbvxx89Bm0/hI=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = DeleteUserWidget;\nvar _c;\n$RefreshReg$(_c, \"DeleteUserWidget\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","NavItem","TitleBar","TitleButton","TitleButtons","Widget","WidgetBody","jsxDEV","_jsxDEV","Fragment","_Fragment","DeleteUserWidget","props","_s","session","s","dispatch","validateMode","setValidateMode","toggleValidateMode","e","preventDefault","clickedAccept","deleteResponse","fetch","username","method","credentials","headers","authToken","data","json","ok","Error","message","signOutResponse","type","err","console","error","children","title","name","icon","handleClick","fileName","_jsxFileName","lineNumber","columnNumber","class","role","_c","$RefreshReg$"],"sources":["D:/Niharika/WT Project/Medicus/src/containers/settings/widgets/deleteUser.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { NavItem } from '../../../components/navs';\r\nimport { TitleBar, TitleButton, TitleButtons, Widget, WidgetBody } from '../../../components/widgets';\r\n\r\n\r\nexport default function DeleteUserWidget(props) {\r\n    const session = useSelector(s => s.session);\r\n    const dispatch = useDispatch();\r\n\r\n    const [validateMode, setValidateMode] = useState(false);\r\n\r\n    async function toggleValidateMode(e) {\r\n        e.preventDefault();\r\n        setValidateMode(!validateMode);\r\n    }\r\n\r\n    async function clickedAccept(e) {\r\n        e.preventDefault();\r\n        try {\r\n            const deleteResponse = await fetch(`/api/users/${session.username}`, {\r\n                method: 'DELETE',\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${session.authToken}`\r\n                }\r\n            });\r\n\r\n            let data = await deleteResponse.json();\r\n            if (!deleteResponse.ok) {\r\n                throw new Error(data.message);\r\n            }\r\n\r\n            const signOutResponse = await fetch(`/api/auth/signout`, {\r\n                method: 'GET',\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${session.authToken}`\r\n                }\r\n            });\r\n\r\n            data = await signOutResponse.json();\r\n            if (!signOutResponse.ok) {\r\n                throw new Error(data.message);\r\n            }\r\n\r\n            dispatch({\r\n                type: \"session/reset\"\r\n            });\r\n        } catch (err) {\r\n            console.error(`Failed to delete user. ${err}`);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Widget>\r\n            <TitleBar title=\"Delete Account\">\r\n                {\r\n                    (validateMode) ?\r\n                    <>\r\n                        <TitleButtons>\r\n                            <NavItem>\r\n                                <TitleButton name=\"Accept\" icon=\"check\" handleClick={clickedAccept} />\r\n                            </NavItem>\r\n                            <NavItem>\r\n                                <TitleButton name=\"Cancel\" icon=\"clear\" handleClick={toggleValidateMode} />\r\n                            </NavItem>\r\n                        </TitleButtons>\r\n                    </> :\r\n                    <>\r\n                        <TitleButton name=\"Delete\" icon=\"delete\" handleClick={toggleValidateMode} />\r\n                    </>\r\n                }\r\n            </TitleBar>\r\n            {validateMode &&\r\n                <WidgetBody>\r\n                    <div class=\"alert alert-danger\" role=\"alert\">\r\n                        Once your account is deleted, all your information is removed from our website and it cannot be retrieved back. \r\n                        Please reconsider once before proceeding. We're sad to see you leave.\r\n                    </div>\r\n                </WidgetBody>\r\n            }\r\n        </Widget>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}