{"ast":null,"code":"var _jsxFileName = \"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\src\\\\containers\\\\users\\\\lists.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FluidContainer, Row, Col } from '../../components/layout';\nimport { List, ListItem } from '../../components/lists';\nimport { AutoLoader } from '../../components/loaders';\nimport User from './user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DefaultItems(props) {\n  return /*#__PURE__*/_jsxDEV(ListItem, {\n    className: \"border-0\",\n    children: /*#__PURE__*/_jsxDEV(FluidContainer, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          className: \"col-auto align-items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"my-0 text-muted\",\n            children: props.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 9\n  }, this);\n}\n_c = DefaultItems;\nexport function ListView(props) {\n  const userItems = [];\n  if (props.users && props.users.length > 0) {\n    for (const [index, user] of props.users.entries()) {\n      const userItem = /*#__PURE__*/_jsxDEV(ListItem, {\n        className: \"px-3\",\n        children: /*#__PURE__*/_jsxDEV(User, {\n          session: props.session,\n          username: user.username,\n          listView: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }, this);\n      userItems.push(userItem);\n    }\n  } else {\n    userItems.push(/*#__PURE__*/_jsxDEV(DefaultItems, {\n      message: props.defaultMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(List, {\n    className: \"md-list\",\n    children: userItems\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_c2 = ListView;\nexport default function InfiniteUserList(props) {\n  _s();\n  const session = useSelector(s => s.session);\n  const getUsers = useCallback(async ({\n    view = '',\n    search = '',\n    page = 0,\n    limit = 10\n  }) => {\n    try {\n      const searchParams = new URLSearchParams();\n      searchParams.append('view', view ? view : '');\n      searchParams.append('search', search ? search : '');\n      searchParams.append('page', page);\n      searchParams.append('limit', limit);\n      const response = await fetch(`/api/users?${searchParams.toString()}`, {\n        headers: {\n          'Authorization': `Bearer ${session.authToken}`\n        }\n      });\n      const users = await response.json();\n      if (!response.ok) {\n        throw new Error(users.message);\n      }\n      return users;\n    } catch (err) {\n      throw err;\n    }\n  }, [session.authToken]);\n  const [state, setState] = useState({\n    users: [],\n    limit: 10\n  });\n\n  // If props change, initialize users.\n  useEffect(() => {\n    async function load() {\n      try {\n        const newUsers = await getUsers({\n          view: props.view,\n          search: props.search,\n          page: 0,\n          limit: state.limit\n        });\n        setState(prevState => {\n          return {\n            ...prevState,\n            users: newUsers\n          };\n        });\n      } catch (err) {\n        console.error(`Failed to load users. ${err}`);\n      }\n    }\n    load();\n  }, [props.view, props.search, getUsers, state.limit]);\n  async function appendUsers() {\n    try {\n      const newUsers = await getUsers({\n        view: props.view,\n        search: props.search,\n        page: Math.ceil(state.users.length / state.limit),\n        limit: state.limit\n      });\n      setState(prevState => {\n        const updatedUsers = [...prevState.users, ...newUsers];\n        return {\n          ...prevState,\n          users: updatedUsers\n        };\n      });\n    } catch (err) {\n      console.error(`Failed to append more users. ${err}`);\n    }\n  }\n\n  // Now render view\n  return /*#__PURE__*/_jsxDEV(FluidContainer, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        className: \"px-0\",\n        children: [/*#__PURE__*/_jsxDEV(ListView, {\n          session: session,\n          users: state.users,\n          defaultMessage: props.defaultMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), state.users.length > 0 && /*#__PURE__*/_jsxDEV(AutoLoader, {\n          callback: appendUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 9\n  }, this);\n}\n_s(InfiniteUserList, \"Yb9qLNC4fkHvwc7bVLMxawukBdQ=\", false, function () {\n  return [useSelector];\n});\n_c3 = InfiniteUserList;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DefaultItems\");\n$RefreshReg$(_c2, \"ListView\");\n$RefreshReg$(_c3, \"InfiniteUserList\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useSelector","FluidContainer","Row","Col","List","ListItem","AutoLoader","User","jsxDEV","_jsxDEV","DefaultItems","props","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","ListView","userItems","users","length","index","user","entries","userItem","session","username","listView","push","defaultMessage","_c2","InfiniteUserList","_s","s","getUsers","view","search","page","limit","searchParams","URLSearchParams","append","response","fetch","toString","headers","authToken","json","ok","Error","err","state","setState","load","newUsers","prevState","console","error","appendUsers","Math","ceil","updatedUsers","callback","_c3","$RefreshReg$"],"sources":["D:/Niharika/WT Project/Medicus/src/containers/users/lists.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { FluidContainer, Row, Col } from '../../components/layout';\r\nimport { List, ListItem } from '../../components/lists';\r\nimport { AutoLoader } from '../../components/loaders';\r\n\r\nimport User from './user';\r\n\r\n\r\nfunction DefaultItems(props) {\r\n    return (\r\n        <ListItem className=\"border-0\">\r\n            <FluidContainer>\r\n                <Row className=\"justify-content-center\">\r\n                    <Col className=\"col-auto align-items-center\">\r\n                        <h6 className=\"my-0 text-muted\">\r\n                            {props.message}\r\n                        </h6>\r\n                    </Col>\r\n                </Row>\r\n            </FluidContainer>\r\n        </ListItem>\r\n    );\r\n}\r\n\r\n\r\nexport function ListView(props) {\r\n    const userItems = [];\r\n    if (props.users && props.users.length > 0) {\r\n        for (const [index, user] of props.users.entries()) {\r\n\r\n            const userItem = (\r\n                <ListItem key={index} className=\"px-3\">\r\n                    <User\r\n                        session={props.session}\r\n                        username={user.username}\r\n                        listView={true}\r\n                    />\r\n                </ListItem>\r\n            );\r\n            userItems.push(userItem);\r\n        }\r\n    } else {\r\n        userItems.push(\r\n            <DefaultItems message={props.defaultMessage} />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <List className=\"md-list\">\r\n            {userItems}\r\n        </List>\r\n    );\r\n}\r\n\r\n\r\nexport default function InfiniteUserList(props) {\r\n    const session = useSelector(s => s.session);\r\n\r\n    const getUsers = useCallback(async ({view='', search='', page=0, limit=10}) => {\r\n        try {\r\n            const searchParams = new URLSearchParams();\r\n            searchParams.append('view', (view) ? view : '');\r\n            searchParams.append('search', (search) ? search : '');\r\n            searchParams.append('page', page);\r\n            searchParams.append('limit', limit);\r\n\r\n            const response = await fetch(`/api/users?${searchParams.toString()}`, {\r\n                headers: {\r\n                'Authorization': `Bearer ${session.authToken}`\r\n                }\r\n            });\r\n\r\n            const users = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(users.message);\r\n            }\r\n\r\n            return users;\r\n        } catch (err) {\r\n            throw(err);\r\n        }\r\n    }, [session.authToken]);\r\n\r\n    const [state, setState] = useState({\r\n        users: [],\r\n        limit: 10\r\n    });\r\n\r\n    // If props change, initialize users.\r\n    useEffect(() => {\r\n        async function load() {\r\n            try {\r\n                const newUsers = await getUsers({\r\n                    view: props.view,\r\n                    search: props.search,\r\n                    page: 0,\r\n                    limit: state.limit\r\n                });\r\n\r\n                setState(prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        users: newUsers\r\n                    }\r\n                });\r\n            } catch (err) {\r\n                console.error(`Failed to load users. ${err}`);\r\n            }\r\n        }\r\n\r\n        load();\r\n    }, [props.view, props.search, getUsers, state.limit]);\r\n\r\n    async function appendUsers() {\r\n        try {\r\n            const newUsers = await getUsers({\r\n                view: props.view,\r\n                search: props.search,\r\n                page: Math.ceil(state.users.length / state.limit),\r\n                limit: state.limit\r\n            });\r\n            \r\n            setState(prevState => {\r\n                const updatedUsers = [...prevState.users, ...newUsers];\r\n\r\n                return {\r\n                    ...prevState,\r\n                    users: updatedUsers\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.error(`Failed to append more users. ${err}`);\r\n        }\r\n    }\r\n\r\n    // Now render view\r\n    return (\r\n        <FluidContainer>\r\n            <Row>\r\n                <Col className=\"px-0\">\r\n                    <ListView\r\n                        session={session}\r\n                        users={state.users}\r\n                        defaultMessage={props.defaultMessage}\r\n                    />\r\n                    {(state.users.length > 0) &&\r\n                        <AutoLoader callback={appendUsers} />\r\n                    }\r\n                </Col>\r\n            </Row>\r\n        </FluidContainer>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}