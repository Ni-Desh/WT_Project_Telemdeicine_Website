{"ast":null,"code":"import * as api from '../api';\nimport { setDoctors, setLocker } from '../store/index';\nexport const getDoctors = name => async (dispatch, getState) => {\n  try {\n    var _state$session, _state$session2;\n    const state = getState();\n    // Check both common locations for the token\n    const token = ((_state$session = state.session) === null || _state$session === void 0 ? void 0 : _state$session.authToken) || ((_state$session2 = state.session) === null || _state$session2 === void 0 ? void 0 : _state$session2.token);\n    if (!token) {\n      console.error(\"No token found in state! User might be logged out.\");\n    }\n    const {\n      data\n    } = await api.searchDoctors(name, token);\n    dispatch(setDoctors(data));\n  } catch (error) {\n    var _error$response;\n    console.log(\"Search Error:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n  }\n};\nexport const getLocker = username => async (dispatch, getState) => {\n  try {\n    // 1. Get the session from the state\n    const {\n      session\n    } = getState();\n    const token = session.authToken || session.token;\n\n    // 2. Pass the username and token to the API call\n    const {\n      data\n    } = await api.fetchLocker(username, token);\n    dispatch(setLocker(data));\n  } catch (error) {\n    console.log(\"Locker Error:\", error);\n  }\n};","map":{"version":3,"names":["api","setDoctors","setLocker","getDoctors","name","dispatch","getState","_state$session","_state$session2","state","token","session","authToken","console","error","data","searchDoctors","_error$response","log","response","message","getLocker","username","fetchLocker"],"sources":["D:/Niharika/WT Project/Medicus/src/Actions/patient.js"],"sourcesContent":["import * as api from '../api';\r\nimport { setDoctors, setLocker } from '../store/index'; \r\n\r\nexport const getDoctors = (name) => async (dispatch, getState) => {\r\n    try {\r\n        const state = getState();\r\n        // Check both common locations for the token\r\n        const token = state.session?.authToken || state.session?.token;\r\n\r\n        if (!token) {\r\n            console.error(\"No token found in state! User might be logged out.\");\r\n        }\r\n\r\n        const { data } = await api.searchDoctors(name, token);\r\n        dispatch(setDoctors(data)); \r\n    } catch (error) {\r\n        console.log(\"Search Error:\", error.response?.data || error.message);\r\n    }\r\n};\r\nexport const getLocker = (username) => async (dispatch, getState) => {\r\n    try {\r\n        // 1. Get the session from the state\r\n        const { session } = getState();\r\n        const token = session.authToken || session.token;\r\n\r\n        // 2. Pass the username and token to the API call\r\n        const { data } = await api.fetchLocker(username, token);\r\n        \r\n        dispatch(setLocker(data)); \r\n    } catch (error) {\r\n        console.log(\"Locker Error:\", error);\r\n    }\r\n};"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,QAAQ;AAC7B,SAASC,UAAU,EAAEC,SAAS,QAAQ,gBAAgB;AAEtD,OAAO,MAAMC,UAAU,GAAIC,IAAI,IAAK,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EAC9D,IAAI;IAAA,IAAAC,cAAA,EAAAC,eAAA;IACA,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB;IACA,MAAMI,KAAK,GAAG,EAAAH,cAAA,GAAAE,KAAK,CAACE,OAAO,cAAAJ,cAAA,uBAAbA,cAAA,CAAeK,SAAS,OAAAJ,eAAA,GAAIC,KAAK,CAACE,OAAO,cAAAH,eAAA,uBAAbA,eAAA,CAAeE,KAAK;IAE9D,IAAI,CAACA,KAAK,EAAE;MACRG,OAAO,CAACC,KAAK,CAAC,oDAAoD,CAAC;IACvE;IAEA,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMf,GAAG,CAACgB,aAAa,CAACZ,IAAI,EAAEM,KAAK,CAAC;IACrDL,QAAQ,CAACJ,UAAU,CAACc,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOD,KAAK,EAAE;IAAA,IAAAG,eAAA;IACZJ,OAAO,CAACK,GAAG,CAAC,eAAe,EAAE,EAAAD,eAAA,GAAAH,KAAK,CAACK,QAAQ,cAAAF,eAAA,uBAAdA,eAAA,CAAgBF,IAAI,KAAID,KAAK,CAACM,OAAO,CAAC;EACvE;AACJ,CAAC;AACD,OAAO,MAAMC,SAAS,GAAIC,QAAQ,IAAK,OAAOjB,QAAQ,EAAEC,QAAQ,KAAK;EACjE,IAAI;IACA;IACA,MAAM;MAAEK;IAAQ,CAAC,GAAGL,QAAQ,CAAC,CAAC;IAC9B,MAAMI,KAAK,GAAGC,OAAO,CAACC,SAAS,IAAID,OAAO,CAACD,KAAK;;IAEhD;IACA,MAAM;MAAEK;IAAK,CAAC,GAAG,MAAMf,GAAG,CAACuB,WAAW,CAACD,QAAQ,EAAEZ,KAAK,CAAC;IAEvDL,QAAQ,CAACH,SAAS,CAACa,IAAI,CAAC,CAAC;EAC7B,CAAC,CAAC,OAAOD,KAAK,EAAE;IACZD,OAAO,CAACK,GAAG,CAAC,eAAe,EAAEJ,KAAK,CAAC;EACvC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}