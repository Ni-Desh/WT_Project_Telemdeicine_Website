{"ast":null,"code":"var _jsxFileName = \"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\src\\\\containers\\\\chats\\\\chat\\\\detailedView\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { FluidContainer } from '../../../../components/layout';\nimport { Loader } from '../../../../components/loaders';\nimport TitleBar, { TitleBarLink, TitleBarLinks } from '../../../home/titleBar';\nimport MessageWindow from './messageWindow';\nimport SendMessageBar from './sendMessage';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DetailedView(props) {\n  _s();\n  const [channel, setChannel] = useState(null);\n  useEffect(() => {\n    async function reconnect() {\n      try {\n        if (channel && !channel.connected) {\n          connect();\n        }\n      } catch (err) {\n        console.error(`Failed to reconnect to server. ${err}`);\n      }\n    }\n    async function connect() {\n      try {\n        const newChannel = io();\n        newChannel.on('connect', () => {\n          console.debug(`Channel connection status: ${newChannel.connected}`);\n          console.log(\"Connected to server.\");\n        });\n        newChannel.on('disconnect', reconnect);\n        newChannel.emit('join', {\n          chatId: props.chat.id\n        }, response => {\n          if (response.status === \"ok\") {\n            console.debug(\"Joined chat session.\");\n          } else {\n            console.log(\"Failed to join chat session.\");\n          }\n        });\n        setChannel(newChannel);\n      } catch (err) {\n        console.error(`Failed to connect to server. ${err}`);\n      }\n    }\n    connect();\n    return function disconnect() {\n      async function closeChannel() {\n        try {\n          if (channel) {\n            channel.emit('leave', {\n              chatId: props.chat.id\n            }, response => {\n              if (response.status === \"ok\") {\n                console.debug(\"Left chat session.\");\n              } else {\n                console.log(\"Failed to leave chat session.\");\n              }\n            });\n            channel.close();\n            console.debug(`Channel connection status: ${channel.connected}`);\n          }\n          console.log(\"Disconnected from server.\");\n          setChannel(null);\n        } catch (err) {\n          console.error(`Failed to disconnect from server. ${err}`);\n        }\n      }\n      closeChannel();\n    };\n  }, [props.chat]);\n  return /*#__PURE__*/_jsxDEV(FluidContainer, {\n    className: \"d-flex flex-column md-chat h-100 px-0\",\n    children: props.isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        isLoading: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TitleBar, {\n        title: props.chat.title,\n        children: /*#__PURE__*/_jsxDEV(TitleBarLinks, {\n          children: /*#__PURE__*/_jsxDEV(TitleBarLink, {\n            path: `/appointments/${props.chat.appointmentId}`,\n            title: \"Go to Appointment\",\n            icon: \"event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(MessageWindow, {\n        session: props.session,\n        chat: props.chat,\n        channel: channel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SendMessageBar, {\n        session: props.session,\n        chat: props.chat,\n        channel: channel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n_s(DetailedView, \"LclyaTWB/peX1+M5BmqAAVsV8UU=\");\n_c = DetailedView;\nvar _c;\n$RefreshReg$(_c, \"DetailedView\");","map":{"version":3,"names":["React","useEffect","useState","io","FluidContainer","Loader","TitleBar","TitleBarLink","TitleBarLinks","MessageWindow","SendMessageBar","jsxDEV","_jsxDEV","Fragment","_Fragment","DetailedView","props","_s","channel","setChannel","reconnect","connected","connect","err","console","error","newChannel","on","debug","log","emit","chatId","chat","id","response","status","disconnect","closeChannel","close","className","children","isLoading","fileName","_jsxFileName","lineNumber","columnNumber","title","path","appointmentId","icon","session","_c","$RefreshReg$"],"sources":["D:/Niharika/WT Project/Medicus/src/containers/chats/chat/detailedView/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { FluidContainer } from '../../../../components/layout';\r\nimport { Loader } from '../../../../components/loaders';\r\n\r\nimport TitleBar, { TitleBarLink, TitleBarLinks } from '../../../home/titleBar';\r\nimport MessageWindow from './messageWindow';\r\nimport SendMessageBar from './sendMessage';\r\n\r\n\r\nexport default function DetailedView(props) {\r\n    const [channel, setChannel] = useState(null);\r\n\r\n    useEffect(() => {\r\n        async function reconnect() {\r\n            try {\r\n                if (channel && !channel.connected) {\r\n                    connect();\r\n                }\r\n            } catch (err) {\r\n                console.error(`Failed to reconnect to server. ${err}`);\r\n            }\r\n        }\r\n\r\n        async function connect() {\r\n            try {\r\n                const newChannel = io();\r\n\r\n                newChannel.on('connect', () => {\r\n                    console.debug(`Channel connection status: ${newChannel.connected}`);\r\n                    console.log(\"Connected to server.\");\r\n                });\r\n\r\n                newChannel.on('disconnect', reconnect);\r\n\r\n                newChannel.emit('join',\r\n                    { chatId: props.chat.id },\r\n                    (response) => {\r\n                        if (response.status === \"ok\") {\r\n                            console.debug(\"Joined chat session.\");\r\n                        } else {\r\n                            console.log(\"Failed to join chat session.\");\r\n                        }\r\n                    }\r\n                );\r\n\r\n                setChannel(newChannel);\r\n            } catch (err) {\r\n                console.error(`Failed to connect to server. ${err}`);\r\n            }\r\n        }\r\n\r\n        connect();\r\n        return function disconnect() {\r\n            async function closeChannel() {\r\n                try {\r\n                    if (channel) {\r\n                        channel.emit('leave',\r\n                            { chatId: props.chat.id },\r\n                            (response) => {\r\n                                if (response.status === \"ok\") {\r\n                                    console.debug(\"Left chat session.\");\r\n                                } else {\r\n                                    console.log(\"Failed to leave chat session.\");\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                        channel.close();\r\n                        console.debug(`Channel connection status: ${channel.connected}`);\r\n                    }\r\n\r\n                    console.log(\"Disconnected from server.\");\r\n                    setChannel(null);\r\n                } catch (err) {\r\n                    console.error(`Failed to disconnect from server. ${err}`);\r\n                }\r\n            }\r\n\r\n            closeChannel();\r\n        }\r\n    }, [props.chat]);\r\n\r\n    return (\r\n        <FluidContainer className=\"d-flex flex-column md-chat h-100 px-0\">\r\n            {\r\n                (props.isLoading) ?\r\n                <>\r\n                    <Loader isLoading={true} />\r\n                </> :\r\n                <>\r\n                    <TitleBar title={props.chat.title} >\r\n                        <TitleBarLinks>\r\n                            <TitleBarLink\r\n                                path={`/appointments/${props.chat.appointmentId}`}\r\n                                title=\"Go to Appointment\"\r\n                                icon=\"event\"\r\n                            />\r\n                        </TitleBarLinks>\r\n                    </TitleBar>\r\n                    <MessageWindow \r\n                        session={props.session}\r\n                        chat={props.chat}\r\n                        channel={channel}\r\n                    />\r\n                    <SendMessageBar\r\n                        session={props.session}\r\n                        chat={props.chat}\r\n                        channel={channel}\r\n                    />\r\n                </>\r\n            }\r\n        </FluidContainer>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,cAAc,QAAQ,+BAA+B;AAC9D,SAASC,MAAM,QAAQ,gCAAgC;AAEvD,OAAOC,QAAQ,IAAIC,YAAY,EAAEC,aAAa,QAAQ,wBAAwB;AAC9E,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,cAAc,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAG3C,eAAe,SAASC,YAAYA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACxC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACZ,eAAemB,SAASA,CAAA,EAAG;MACvB,IAAI;QACA,IAAIF,OAAO,IAAI,CAACA,OAAO,CAACG,SAAS,EAAE;UAC/BC,OAAO,CAAC,CAAC;QACb;MACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kCAAkCF,GAAG,EAAE,CAAC;MAC1D;IACJ;IAEA,eAAeD,OAAOA,CAAA,EAAG;MACrB,IAAI;QACA,MAAMI,UAAU,GAAGvB,EAAE,CAAC,CAAC;QAEvBuB,UAAU,CAACC,EAAE,CAAC,SAAS,EAAE,MAAM;UAC3BH,OAAO,CAACI,KAAK,CAAC,8BAA8BF,UAAU,CAACL,SAAS,EAAE,CAAC;UACnEG,OAAO,CAACK,GAAG,CAAC,sBAAsB,CAAC;QACvC,CAAC,CAAC;QAEFH,UAAU,CAACC,EAAE,CAAC,YAAY,EAAEP,SAAS,CAAC;QAEtCM,UAAU,CAACI,IAAI,CAAC,MAAM,EAClB;UAAEC,MAAM,EAAEf,KAAK,CAACgB,IAAI,CAACC;QAAG,CAAC,EACxBC,QAAQ,IAAK;UACV,IAAIA,QAAQ,CAACC,MAAM,KAAK,IAAI,EAAE;YAC1BX,OAAO,CAACI,KAAK,CAAC,sBAAsB,CAAC;UACzC,CAAC,MAAM;YACHJ,OAAO,CAACK,GAAG,CAAC,8BAA8B,CAAC;UAC/C;QACJ,CACJ,CAAC;QAEDV,UAAU,CAACO,UAAU,CAAC;MAC1B,CAAC,CAAC,OAAOH,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,gCAAgCF,GAAG,EAAE,CAAC;MACxD;IACJ;IAEAD,OAAO,CAAC,CAAC;IACT,OAAO,SAASc,UAAUA,CAAA,EAAG;MACzB,eAAeC,YAAYA,CAAA,EAAG;QAC1B,IAAI;UACA,IAAInB,OAAO,EAAE;YACTA,OAAO,CAACY,IAAI,CAAC,OAAO,EAChB;cAAEC,MAAM,EAAEf,KAAK,CAACgB,IAAI,CAACC;YAAG,CAAC,EACxBC,QAAQ,IAAK;cACV,IAAIA,QAAQ,CAACC,MAAM,KAAK,IAAI,EAAE;gBAC1BX,OAAO,CAACI,KAAK,CAAC,oBAAoB,CAAC;cACvC,CAAC,MAAM;gBACHJ,OAAO,CAACK,GAAG,CAAC,+BAA+B,CAAC;cAChD;YACJ,CACJ,CAAC;YAEDX,OAAO,CAACoB,KAAK,CAAC,CAAC;YACfd,OAAO,CAACI,KAAK,CAAC,8BAA8BV,OAAO,CAACG,SAAS,EAAE,CAAC;UACpE;UAEAG,OAAO,CAACK,GAAG,CAAC,2BAA2B,CAAC;UACxCV,UAAU,CAAC,IAAI,CAAC;QACpB,CAAC,CAAC,OAAOI,GAAG,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,qCAAqCF,GAAG,EAAE,CAAC;QAC7D;MACJ;MAEAc,YAAY,CAAC,CAAC;IAClB,CAAC;EACL,CAAC,EAAE,CAACrB,KAAK,CAACgB,IAAI,CAAC,CAAC;EAEhB,oBACIpB,OAAA,CAACR,cAAc;IAACmC,SAAS,EAAC,uCAAuC;IAAAC,QAAA,EAExDxB,KAAK,CAACyB,SAAS,gBAChB7B,OAAA,CAAAE,SAAA;MAAA0B,QAAA,eACI5B,OAAA,CAACP,MAAM;QAACoC,SAAS,EAAE;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC,gBAC7B,CAAC,gBACHjC,OAAA,CAAAE,SAAA;MAAA0B,QAAA,gBACI5B,OAAA,CAACN,QAAQ;QAACwC,KAAK,EAAE9B,KAAK,CAACgB,IAAI,CAACc,KAAM;QAAAN,QAAA,eAC9B5B,OAAA,CAACJ,aAAa;UAAAgC,QAAA,eACV5B,OAAA,CAACL,YAAY;YACTwC,IAAI,EAAE,iBAAiB/B,KAAK,CAACgB,IAAI,CAACgB,aAAa,EAAG;YAClDF,KAAK,EAAC,mBAAmB;YACzBG,IAAI,EAAC;UAAO;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACS;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eACXjC,OAAA,CAACH,aAAa;QACVyC,OAAO,EAAElC,KAAK,CAACkC,OAAQ;QACvBlB,IAAI,EAAEhB,KAAK,CAACgB,IAAK;QACjBd,OAAO,EAAEA;MAAQ;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAAC,eACFjC,OAAA,CAACF,cAAc;QACXwC,OAAO,EAAElC,KAAK,CAACkC,OAAQ;QACvBlB,IAAI,EAAEhB,KAAK,CAACgB,IAAK;QACjBd,OAAO,EAAEA;MAAQ;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAAC;IAAA,eACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEK,CAAC;AAEzB;AAAC5B,EAAA,CAxGuBF,YAAY;AAAAoC,EAAA,GAAZpC,YAAY;AAAA,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}