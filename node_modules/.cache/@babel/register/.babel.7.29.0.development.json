{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\server\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Niharika\\\\WT Project\\\\Medicus\",\"filename\":\"D:\\\\Niharika\\\\WT Project\\\\Medicus\\\\server\\\\app.js\",\"targets\":{\"android\":\"144.0.0\",\"chrome\":\"103.0.0\",\"edge\":\"143.0.0\",\"firefox\":\"146.0.0\",\"ios\":\"11.0.0\",\"opera\":\"125.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"26.2.0\",\"samsung\":\"29.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Niharika\\\\WT Project\\\\Medicus\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"MemberExpression\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-decorators\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"legacy\":true},\"externalDependencies\":[]},{\"key\":\"proposal-function-sent\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-throw-expressions\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-export-default-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-pipeline-operator\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"proposal\":\"minimal\"},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-do-expressions\",\"visitor\":{\"DoExpression\":{\"exit\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.29.0:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\nvar _socket = require(\"socket.io\");\nvar _mongodb = require(\"mongodb\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _url = require(\"url\");\nvar _userSchema = _interopRequireDefault(require(\"./schema/userSchema.js\"));\nvar _sessionSchema = _interopRequireDefault(require(\"./schema/sessionSchema.js\"));\nvar _appointmentSchema = _interopRequireDefault(require(\"./schema/appointmentSchema.js\"));\nvar _chatSchema = _interopRequireDefault(require(\"./schema/chatSchema.js\"));\nvar _messageSchema = _interopRequireDefault(require(\"./schema/messageSchema.js\"));\nvar _userDAO = _interopRequireDefault(require(\"./dao/userDAO.js\"));\nvar _sessionDAO = _interopRequireDefault(require(\"./dao/sessionDAO.js\"));\nvar _appointmentDAO = _interopRequireDefault(require(\"./dao/appointmentDAO.js\"));\nvar _chatDAO = _interopRequireDefault(require(\"./dao/chatDAO.js\"));\nvar _messageDAO = _interopRequireDefault(require(\"./dao/messageDAO.js\"));\nvar _degreeDAO = _interopRequireDefault(require(\"./dao/degreeDAO.js\"));\nvar _jobDAO = _interopRequireDefault(require(\"./dao/jobDAO.js\"));\nvar _serviceDAO = _interopRequireDefault(require(\"./dao/serviceDAO.js\"));\nvar _insuranceDAO = _interopRequireDefault(require(\"./dao/insuranceDAO.js\"));\nvar _paymentDAO = _interopRequireDefault(require(\"./dao/paymentDAO.js\"));\nvar _labReportDAO = _interopRequireDefault(require(\"./dao/labReportDAO.js\"));\nvar _medicationDAO = _interopRequireDefault(require(\"./dao/medicationDAO.js\"));\nvar _noteDAO = _interopRequireDefault(require(\"./dao/noteDAO.js\"));\nvar _middlewares = require(\"./middlewares.js\");\nvar _appRouter = _interopRequireDefault(require(\"./api/appRouter.js\"));\nvar _chatInterface = _interopRequireDefault(require(\"./api/chatApp/chatInterface.js\"));\n// Schemas & DAOs\n\n_dotenv.default.config();\n\n// ES Module fix for __dirname\nconst _filename = (0, _url.fileURLToPath)(import.meta.url);\nconst _dirname = _path.default.dirname(_filename);\nconst app = (0, _express.default)();\n\n// 1. Security & Parsing Middleware\napp.use((0, _helmet.default)({\n  contentSecurityPolicy: {\n    directives: {\n      \"default-src\": [\"'self'\", \"ws:\", \"*.bootstrapcdn.com\", \"*.googleapis.com\", \"*.gstatic.com\"],\n      \"script-src\": [\"'self'\", \"'unsafe-inline'\", \"*.bootstrapcdn.com\", \"*.cloudflare.com\", \"*.jquery.com\", \"*.googleapis.com\"],\n      \"img-src\": [\"'self'\", \"data:\", \"blob:\", \"*.w3.org\"]\n    }\n  }\n}));\napp.use((0, _cors.default)());\napp.use(_express.default.json());\napp.set('trust proxy', 1);\n\n// 2. Static Files & API Routes\n// Note: Routes MUST come before error handlers\napp.use('/static', _express.default.static(_path.default.join(_dirname, '/../build/static')));\napp.use('/public', _express.default.static(_path.default.join(_dirname, '/../build/')));\napp.use('/api', _appRouter.default);\napp.get('/robots.txt', (req, res) => res.sendFile('robots.txt', {\n  root: _dirname\n}));\napp.get('*', (req, res) => res.sendFile('index.html', {\n  root: _path.default.join(_dirname, '/../build/')\n}));\n\n// 3. Error Handling Middleware (MUST BE LAST)\napp.use(_middlewares.notFound);\napp.use(_middlewares.errorHandler);\n\n// 4. Database Connection Logic\n_mongodb.MongoClient.connect(process.env.DB_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n  maxPoolSize: 100,\n  // Updated from poolSize\n  writeConcern: {\n    wtimeout: 2500\n  }\n}).catch(err => {\n  console.error(\"âŒ MongoDB Connection Failed:\", err.stack);\n  process.exit(1);\n}).then(async client => {\n  console.log(\"âœ… MongoDB Connected\");\n  try {\n    // Initialize Schemas\n    await (0, _userSchema.default)(client);\n    await (0, _sessionSchema.default)(client);\n    await (0, _appointmentSchema.default)(client);\n    await (0, _chatSchema.default)(client);\n    await (0, _messageSchema.default)(client);\n\n    // Inject DB into DAOs\n    await _userDAO.default.injectDB(client);\n    await _sessionDAO.default.injectDB(client);\n    await _appointmentDAO.default.injectDB(client);\n    await _chatDAO.default.injectDB(client);\n    await _messageDAO.default.injectDB(client);\n    await _degreeDAO.default.injectDB(client);\n    await _jobDAO.default.injectDB(client);\n    await _serviceDAO.default.injectDB(client);\n    await _insuranceDAO.default.injectDB(client);\n    await _paymentDAO.default.injectDB(client);\n    await _labReportDAO.default.injectDB(client);\n    await _medicationDAO.default.injectDB(client);\n    await _noteDAO.default.injectDB(client);\n    console.log(\"âœ… DAO Layer Initialized\");\n  } catch (err) {\n    console.error(\"\\u274C Initialization Error: \".concat(err));\n  }\n\n  // 5. Start HTTP and Socket.io Server\n  const port = process.env.PORT || 3003;\n  const httpServer = _http.default.createServer(app);\n  const io = new _socket.Server(httpServer, {\n    cors: {\n      origin: \"*\",\n      // Adjust this for production security\n      methods: [\"GET\", \"POST\"]\n    }\n  });\n  io.on('connection', socket => {\n    console.log(\"Socket connected: \".concat(socket.id));\n    _chatInterface.default.register(io, socket);\n  });\n  httpServer.listen(port, () => {\n    console.log(\"\\uD83D\\uDE80 Server running on port \".concat(port, \"...\"));\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZXhwcmVzcyIsIl9odHRwIiwiX2NvcnMiLCJfaGVsbWV0IiwiX3NvY2tldCIsIl9tb25nb2RiIiwiX3BhdGgiLCJfdXJsIiwiX3VzZXJTY2hlbWEiLCJfc2Vzc2lvblNjaGVtYSIsIl9hcHBvaW50bWVudFNjaGVtYSIsIl9jaGF0U2NoZW1hIiwiX21lc3NhZ2VTY2hlbWEiLCJfdXNlckRBTyIsIl9zZXNzaW9uREFPIiwiX2FwcG9pbnRtZW50REFPIiwiX2NoYXREQU8iLCJfbWVzc2FnZURBTyIsIl9kZWdyZWVEQU8iLCJfam9iREFPIiwiX3NlcnZpY2VEQU8iLCJfaW5zdXJhbmNlREFPIiwiX3BheW1lbnREQU8iLCJfbGFiUmVwb3J0REFPIiwiX21lZGljYXRpb25EQU8iLCJfbm90ZURBTyIsIl9taWRkbGV3YXJlcyIsIl9hcHBSb3V0ZXIiLCJfY2hhdEludGVyZmFjZSIsImRvdGVudiIsImNvbmZpZyIsIl9fZmlsZW5hbWUiLCJmaWxlVVJMVG9QYXRoIiwiaW1wb3J0IiwibWV0YSIsInVybCIsIl9fZGlybmFtZSIsInBhdGgiLCJkaXJuYW1lIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImhlbG1ldCIsImNvbnRlbnRTZWN1cml0eVBvbGljeSIsImRpcmVjdGl2ZXMiLCJjb3JzIiwianNvbiIsInNldCIsInN0YXRpYyIsImpvaW4iLCJBcHBSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kRmlsZSIsInJvb3QiLCJub3RGb3VuZCIsImVycm9ySGFuZGxlciIsIk1vbmdvQ2xpZW50IiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9VUkkiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJtYXhQb29sU2l6ZSIsIndyaXRlQ29uY2VybiIsInd0aW1lb3V0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsImV4aXQiLCJ0aGVuIiwiY2xpZW50IiwibG9nIiwiY3JlYXRlVXNlclNjaGVtYSIsImNyZWF0ZVNlc3Npb25TY2hlbWEiLCJjcmVhdGVBcHBvaW50bWVudFNjaGVtYSIsImNyZWF0ZUNoYXRTY2hlbWEiLCJjcmVhdGVNZXNzYWdlU2NoZW1hIiwiVXNlckRBTyIsImluamVjdERCIiwiU2Vzc2lvbkRBTyIsIkFwcG9pbnRtZW50REFPIiwiQ2hhdERBTyIsIk1lc3NhZ2VEQU8iLCJEZWdyZWVEQU8iLCJKb2JEQU8iLCJTZXJ2aWNlREFPIiwiSW5zdXJhbmNlREFPIiwiUGF5bWVudERBTyIsIkxhYlJlcG9ydERBTyIsIk1lZGljYXRpb25EQU8iLCJOb3RlREFPIiwiY29uY2F0IiwicG9ydCIsIlBPUlQiLCJodHRwU2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsImlvIiwiU2VydmVyIiwib3JpZ2luIiwibWV0aG9kcyIsIm9uIiwic29ja2V0IiwiaWQiLCJDaGF0SW50ZXJmYWNlIiwicmVnaXN0ZXIiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkQ6XFxOaWhhcmlrYVxcV1QgUHJvamVjdFxcTWVkaWN1c1xcc2VydmVyXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIlxyXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiXHJcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCJcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIlxyXG5pbXBvcnQgaGVsbWV0IGZyb20gXCJoZWxtZXRcIlxyXG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tIFwic29ja2V0LmlvXCJcclxuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tIFwibW9uZ29kYlwiXHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCJcclxuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ3VybCdcclxuXHJcbi8vIFNjaGVtYXMgJiBEQU9zXHJcbmltcG9ydCBjcmVhdGVVc2VyU2NoZW1hIGZyb20gXCIuL3NjaGVtYS91c2VyU2NoZW1hLmpzXCJcclxuaW1wb3J0IGNyZWF0ZVNlc3Npb25TY2hlbWEgZnJvbSBcIi4vc2NoZW1hL3Nlc3Npb25TY2hlbWEuanNcIlxyXG5pbXBvcnQgY3JlYXRlQXBwb2ludG1lbnRTY2hlbWEgZnJvbSBcIi4vc2NoZW1hL2FwcG9pbnRtZW50U2NoZW1hLmpzXCJcclxuaW1wb3J0IGNyZWF0ZUNoYXRTY2hlbWEgZnJvbSBcIi4vc2NoZW1hL2NoYXRTY2hlbWEuanNcIlxyXG5pbXBvcnQgY3JlYXRlTWVzc2FnZVNjaGVtYSBmcm9tIFwiLi9zY2hlbWEvbWVzc2FnZVNjaGVtYS5qc1wiXHJcblxyXG5pbXBvcnQgVXNlckRBTyBmcm9tIFwiLi9kYW8vdXNlckRBTy5qc1wiXHJcbmltcG9ydCBTZXNzaW9uREFPIGZyb20gXCIuL2Rhby9zZXNzaW9uREFPLmpzXCJcclxuaW1wb3J0IEFwcG9pbnRtZW50REFPIGZyb20gXCIuL2Rhby9hcHBvaW50bWVudERBTy5qc1wiXHJcbmltcG9ydCBDaGF0REFPIGZyb20gXCIuL2Rhby9jaGF0REFPLmpzXCJcclxuaW1wb3J0IE1lc3NhZ2VEQU8gZnJvbSBcIi4vZGFvL21lc3NhZ2VEQU8uanNcIlxyXG5pbXBvcnQgRGVncmVlREFPIGZyb20gXCIuL2Rhby9kZWdyZWVEQU8uanNcIlxyXG5pbXBvcnQgSm9iREFPIGZyb20gXCIuL2Rhby9qb2JEQU8uanNcIlxyXG5pbXBvcnQgU2VydmljZURBTyBmcm9tIFwiLi9kYW8vc2VydmljZURBTy5qc1wiXHJcbmltcG9ydCBJbnN1cmFuY2VEQU8gZnJvbSBcIi4vZGFvL2luc3VyYW5jZURBTy5qc1wiXHJcbmltcG9ydCBQYXltZW50REFPIGZyb20gXCIuL2Rhby9wYXltZW50REFPLmpzXCJcclxuaW1wb3J0IExhYlJlcG9ydERBTyBmcm9tIFwiLi9kYW8vbGFiUmVwb3J0REFPLmpzXCJcclxuaW1wb3J0IE1lZGljYXRpb25EQU8gZnJvbSBcIi4vZGFvL21lZGljYXRpb25EQU8uanNcIlxyXG5pbXBvcnQgTm90ZURBTyBmcm9tIFwiLi9kYW8vbm90ZURBTy5qc1wiXHJcblxyXG5pbXBvcnQgeyBub3RGb3VuZCwgZXJyb3JIYW5kbGVyIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMuanNcIlxyXG5pbXBvcnQgQXBwUm91dGVyIGZyb20gXCIuL2FwaS9hcHBSb3V0ZXIuanNcIlxyXG5pbXBvcnQgQ2hhdEludGVyZmFjZSBmcm9tIFwiLi9hcGkvY2hhdEFwcC9jaGF0SW50ZXJmYWNlLmpzXCJcclxuXHJcbmRvdGVudi5jb25maWcoKVxyXG5cclxuLy8gRVMgTW9kdWxlIGZpeCBmb3IgX19kaXJuYW1lXHJcbmNvbnN0IF9fZmlsZW5hbWUgPSBmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCk7XHJcbmNvbnN0IF9fZGlybmFtZSA9IHBhdGguZGlybmFtZShfX2ZpbGVuYW1lKTtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxyXG5cclxuLy8gMS4gU2VjdXJpdHkgJiBQYXJzaW5nIE1pZGRsZXdhcmVcclxuYXBwLnVzZShoZWxtZXQoe1xyXG4gIGNvbnRlbnRTZWN1cml0eVBvbGljeToge1xyXG4gICAgZGlyZWN0aXZlczoge1xyXG4gICAgICBcImRlZmF1bHQtc3JjXCI6IFtcIidzZWxmJ1wiLCBcIndzOlwiLCBcIiouYm9vdHN0cmFwY2RuLmNvbVwiLCBcIiouZ29vZ2xlYXBpcy5jb21cIiwgXCIqLmdzdGF0aWMuY29tXCJdLFxyXG4gICAgICBcInNjcmlwdC1zcmNcIjogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCIsIFwiKi5ib290c3RyYXBjZG4uY29tXCIsIFwiKi5jbG91ZGZsYXJlLmNvbVwiLCBcIiouanF1ZXJ5LmNvbVwiLCBcIiouZ29vZ2xlYXBpcy5jb21cIl0sXHJcbiAgICAgIFwiaW1nLXNyY1wiOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiLCBcImJsb2I6XCIsIFwiKi53My5vcmdcIl1cclxuICAgIH1cclxuICB9XHJcbn0pKVxyXG5hcHAudXNlKGNvcnMoKSlcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSlcclxuYXBwLnNldCgndHJ1c3QgcHJveHknLCAxKVxyXG5cclxuLy8gMi4gU3RhdGljIEZpbGVzICYgQVBJIFJvdXRlc1xyXG4vLyBOb3RlOiBSb3V0ZXMgTVVTVCBjb21lIGJlZm9yZSBlcnJvciBoYW5kbGVyc1xyXG5hcHAudXNlKCcvc3RhdGljJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9idWlsZC9zdGF0aWMnKSkpXHJcbmFwcC51c2UoJy9wdWJsaWMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLy4uL2J1aWxkLycpKSlcclxuYXBwLnVzZSgnL2FwaScsIEFwcFJvdXRlcilcclxuXHJcbmFwcC5nZXQoJy9yb2JvdHMudHh0JywgKHJlcSwgcmVzKSA9PiByZXMuc2VuZEZpbGUoJ3JvYm90cy50eHQnLCB7IHJvb3Q6IF9fZGlybmFtZSB9KSlcclxuYXBwLmdldCgnKicsIChyZXEsIHJlcykgPT4gcmVzLnNlbmRGaWxlKCdpbmRleC5odG1sJywgeyByb290OiBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLy4uL2J1aWxkLycpIH0pKVxyXG5cclxuLy8gMy4gRXJyb3IgSGFuZGxpbmcgTWlkZGxld2FyZSAoTVVTVCBCRSBMQVNUKVxyXG5hcHAudXNlKG5vdEZvdW5kKVxyXG5hcHAudXNlKGVycm9ySGFuZGxlcilcclxuXHJcbi8vIDQuIERhdGFiYXNlIENvbm5lY3Rpb24gTG9naWNcclxuTW9uZ29DbGllbnQuY29ubmVjdChwcm9jZXNzLmVudi5EQl9VUkksIHtcclxuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxyXG4gIG1heFBvb2xTaXplOiAxMDAsIC8vIFVwZGF0ZWQgZnJvbSBwb29sU2l6ZVxyXG4gIHdyaXRlQ29uY2VybjogeyB3dGltZW91dDogMjUwMCB9XHJcbn0pLmNhdGNoKGVyciA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihcIuKdjCBNb25nb0RCIENvbm5lY3Rpb24gRmFpbGVkOlwiLCBlcnIuc3RhY2spXHJcbiAgcHJvY2Vzcy5leGl0KDEpXHJcbn0pLnRoZW4oYXN5bmMgY2xpZW50ID0+IHtcclxuICBjb25zb2xlLmxvZyhcIuKchSBNb25nb0RCIENvbm5lY3RlZFwiKVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBTY2hlbWFzXHJcbiAgICBhd2FpdCBjcmVhdGVVc2VyU2NoZW1hKGNsaWVudClcclxuICAgIGF3YWl0IGNyZWF0ZVNlc3Npb25TY2hlbWEoY2xpZW50KVxyXG4gICAgYXdhaXQgY3JlYXRlQXBwb2ludG1lbnRTY2hlbWEoY2xpZW50KVxyXG4gICAgYXdhaXQgY3JlYXRlQ2hhdFNjaGVtYShjbGllbnQpXHJcbiAgICBhd2FpdCBjcmVhdGVNZXNzYWdlU2NoZW1hKGNsaWVudClcclxuXHJcbiAgICAvLyBJbmplY3QgREIgaW50byBEQU9zXHJcbiAgICBhd2FpdCBVc2VyREFPLmluamVjdERCKGNsaWVudClcclxuICAgIGF3YWl0IFNlc3Npb25EQU8uaW5qZWN0REIoY2xpZW50KVxyXG4gICAgYXdhaXQgQXBwb2ludG1lbnREQU8uaW5qZWN0REIoY2xpZW50KVxyXG4gICAgYXdhaXQgQ2hhdERBTy5pbmplY3REQihjbGllbnQpXHJcbiAgICBhd2FpdCBNZXNzYWdlREFPLmluamVjdERCKGNsaWVudClcclxuICAgIGF3YWl0IERlZ3JlZURBTy5pbmplY3REQihjbGllbnQpXHJcbiAgICBhd2FpdCBKb2JEQU8uaW5qZWN0REIoY2xpZW50KVxyXG4gICAgYXdhaXQgU2VydmljZURBTy5pbmplY3REQihjbGllbnQpXHJcbiAgICBhd2FpdCBJbnN1cmFuY2VEQU8uaW5qZWN0REIoY2xpZW50KVxyXG4gICAgYXdhaXQgUGF5bWVudERBTy5pbmplY3REQihjbGllbnQpXHJcbiAgICBhd2FpdCBMYWJSZXBvcnREQU8uaW5qZWN0REIoY2xpZW50KVxyXG4gICAgYXdhaXQgTWVkaWNhdGlvbkRBTy5pbmplY3REQihjbGllbnQpXHJcbiAgICBhd2FpdCBOb3RlREFPLmluamVjdERCKGNsaWVudClcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coXCLinIUgREFPIExheWVyIEluaXRpYWxpemVkXCIpXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGDinYwgSW5pdGlhbGl6YXRpb24gRXJyb3I6ICR7ZXJyfWApXHJcbiAgfVxyXG5cclxuICAvLyA1LiBTdGFydCBIVFRQIGFuZCBTb2NrZXQuaW8gU2VydmVyXHJcbiAgY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwM1xyXG4gIGNvbnN0IGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApXHJcblxyXG4gIGNvbnN0IGlvID0gbmV3IFNlcnZlcihodHRwU2VydmVyLCB7XHJcbiAgICBjb3JzOiB7XHJcbiAgICAgIG9yaWdpbjogXCIqXCIsIC8vIEFkanVzdCB0aGlzIGZvciBwcm9kdWN0aW9uIHNlY3VyaXR5XHJcbiAgICAgIG1ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIl1cclxuICAgIH1cclxuICB9KVxyXG5cclxuICBpby5vbignY29ubmVjdGlvbicsIChzb2NrZXQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBTb2NrZXQgY29ubmVjdGVkOiAke3NvY2tldC5pZH1gKVxyXG4gICAgQ2hhdEludGVyZmFjZS5yZWdpc3Rlcihpbywgc29ja2V0KVxyXG4gIH0pXHJcblxyXG4gIGh0dHBTZXJ2ZXIubGlzdGVuKHBvcnQsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fS4uLmApXHJcbiAgfSlcclxufSkiXSwibWFwcGluZ3MiOiI7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEs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","map":{"version":3,"names":["_dotenv","_interopRequireDefault","require","_express","_http","_cors","_helmet","_socket","_mongodb","_path","_url","_userSchema","_sessionSchema","_appointmentSchema","_chatSchema","_messageSchema","_userDAO","_sessionDAO","_appointmentDAO","_chatDAO","_messageDAO","_degreeDAO","_jobDAO","_serviceDAO","_insuranceDAO","_paymentDAO","_labReportDAO","_medicationDAO","_noteDAO","_middlewares","_appRouter","_chatInterface","dotenv","config","__filename","fileURLToPath","import","meta","url","__dirname","path","dirname","app","express","use","helmet","contentSecurityPolicy","directives","cors","json","set","static","join","AppRouter","get","req","res","sendFile","root","notFound","errorHandler","MongoClient","connect","process","env","DB_URI","useNewUrlParser","useUnifiedTopology","maxPoolSize","writeConcern","wtimeout","catch","err","console","error","stack","exit","then","client","log","createUserSchema","createSessionSchema","createAppointmentSchema","createChatSchema","createMessageSchema","UserDAO","injectDB","SessionDAO","AppointmentDAO","ChatDAO","MessageDAO","DegreeDAO","JobDAO","ServiceDAO","InsuranceDAO","PaymentDAO","LabReportDAO","MedicationDAO","NoteDAO","concat","port","PORT","httpServer","http","createServer","io","Server","origin","methods","on","socket","id","ChatInterface","register","listen"],"sourceRoot":"D:\\Niharika\\WT Project\\Medicus\\server\\","sources":["app.js"],"sourcesContent":["import dotenv from \"dotenv\"\r\nimport express from \"express\"\r\nimport http from \"http\"\r\nimport cors from \"cors\"\r\nimport helmet from \"helmet\"\r\nimport { Server } from \"socket.io\"\r\nimport { MongoClient } from \"mongodb\"\r\nimport path from \"path\"\r\nimport { fileURLToPath } from 'url'\r\n\r\n// Schemas & DAOs\r\nimport createUserSchema from \"./schema/userSchema.js\"\r\nimport createSessionSchema from \"./schema/sessionSchema.js\"\r\nimport createAppointmentSchema from \"./schema/appointmentSchema.js\"\r\nimport createChatSchema from \"./schema/chatSchema.js\"\r\nimport createMessageSchema from \"./schema/messageSchema.js\"\r\n\r\nimport UserDAO from \"./dao/userDAO.js\"\r\nimport SessionDAO from \"./dao/sessionDAO.js\"\r\nimport AppointmentDAO from \"./dao/appointmentDAO.js\"\r\nimport ChatDAO from \"./dao/chatDAO.js\"\r\nimport MessageDAO from \"./dao/messageDAO.js\"\r\nimport DegreeDAO from \"./dao/degreeDAO.js\"\r\nimport JobDAO from \"./dao/jobDAO.js\"\r\nimport ServiceDAO from \"./dao/serviceDAO.js\"\r\nimport InsuranceDAO from \"./dao/insuranceDAO.js\"\r\nimport PaymentDAO from \"./dao/paymentDAO.js\"\r\nimport LabReportDAO from \"./dao/labReportDAO.js\"\r\nimport MedicationDAO from \"./dao/medicationDAO.js\"\r\nimport NoteDAO from \"./dao/noteDAO.js\"\r\n\r\nimport { notFound, errorHandler } from \"./middlewares.js\"\r\nimport AppRouter from \"./api/appRouter.js\"\r\nimport ChatInterface from \"./api/chatApp/chatInterface.js\"\r\n\r\ndotenv.config()\r\n\r\n// ES Module fix for __dirname\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst app = express()\r\n\r\n// 1. Security & Parsing Middleware\r\napp.use(helmet({\r\n  contentSecurityPolicy: {\r\n    directives: {\r\n      \"default-src\": [\"'self'\", \"ws:\", \"*.bootstrapcdn.com\", \"*.googleapis.com\", \"*.gstatic.com\"],\r\n      \"script-src\": [\"'self'\", \"'unsafe-inline'\", \"*.bootstrapcdn.com\", \"*.cloudflare.com\", \"*.jquery.com\", \"*.googleapis.com\"],\r\n      \"img-src\": [\"'self'\", \"data:\", \"blob:\", \"*.w3.org\"]\r\n    }\r\n  }\r\n}))\r\napp.use(cors())\r\napp.use(express.json())\r\napp.set('trust proxy', 1)\r\n\r\n// 2. Static Files & API Routes\r\n// Note: Routes MUST come before error handlers\r\napp.use('/static', express.static(path.join(__dirname, '/../build/static')))\r\napp.use('/public', express.static(path.join(__dirname, '/../build/')))\r\napp.use('/api', AppRouter)\r\n\r\napp.get('/robots.txt', (req, res) => res.sendFile('robots.txt', { root: __dirname }))\r\napp.get('*', (req, res) => res.sendFile('index.html', { root: path.join(__dirname, '/../build/') }))\r\n\r\n// 3. Error Handling Middleware (MUST BE LAST)\r\napp.use(notFound)\r\napp.use(errorHandler)\r\n\r\n// 4. Database Connection Logic\r\nMongoClient.connect(process.env.DB_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n  maxPoolSize: 100, // Updated from poolSize\r\n  writeConcern: { wtimeout: 2500 }\r\n}).catch(err => {\r\n  console.error(\"âŒ MongoDB Connection Failed:\", err.stack)\r\n  process.exit(1)\r\n}).then(async client => {\r\n  console.log(\"âœ… MongoDB Connected\")\r\n\r\n  try {\r\n    // Initialize Schemas\r\n    await createUserSchema(client)\r\n    await createSessionSchema(client)\r\n    await createAppointmentSchema(client)\r\n    await createChatSchema(client)\r\n    await createMessageSchema(client)\r\n\r\n    // Inject DB into DAOs\r\n    await UserDAO.injectDB(client)\r\n    await SessionDAO.injectDB(client)\r\n    await AppointmentDAO.injectDB(client)\r\n    await ChatDAO.injectDB(client)\r\n    await MessageDAO.injectDB(client)\r\n    await DegreeDAO.injectDB(client)\r\n    await JobDAO.injectDB(client)\r\n    await ServiceDAO.injectDB(client)\r\n    await InsuranceDAO.injectDB(client)\r\n    await PaymentDAO.injectDB(client)\r\n    await LabReportDAO.injectDB(client)\r\n    await MedicationDAO.injectDB(client)\r\n    await NoteDAO.injectDB(client)\r\n    \r\n    console.log(\"âœ… DAO Layer Initialized\")\r\n  } catch (err) {\r\n    console.error(`âŒ Initialization Error: ${err}`)\r\n  }\r\n\r\n  // 5. Start HTTP and Socket.io Server\r\n  const port = process.env.PORT || 3003\r\n  const httpServer = http.createServer(app)\r\n\r\n  const io = new Server(httpServer, {\r\n    cors: {\r\n      origin: \"*\", // Adjust this for production security\r\n      methods: [\"GET\", \"POST\"]\r\n    }\r\n  })\r\n\r\n  io.on('connection', (socket) => {\r\n    console.log(`Socket connected: ${socket.id}`)\r\n    ChatInterface.register(io, socket)\r\n  })\r\n\r\n  httpServer.listen(port, () => {\r\n    console.log(`ðŸš€ Server running on port ${port}...`)\r\n  })\r\n})"],"mappings":"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","ignoreList":[]}},"mtime":1771495927340}}